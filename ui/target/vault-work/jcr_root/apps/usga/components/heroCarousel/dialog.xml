<?xml version="1.0" encoding="UTF-8"?>
<jcr:root xmlns:cq="http://www.day.com/jcr/cq/1.0" xmlns:jcr="http://www.jcp.org/jcr/1.0"
          jcr:primaryType="cq:Dialog"
          width="800"
          height="800"
          xtype="dialog">
    <items jcr:primaryType="cq:WidgetCollection">
        <tab
                jcr:primaryType="cq:Widget"
                hideMode="offsets"
                xtype="panel">
            <items jcr:primaryType="cq:WidgetCollection">
                <autoRotation
                        jcr:primaryType="cq:Widget"
                        defaultValue="false"
                        fieldLabel="Auto Rotation"
                        name="./autoRotation"
                        type="radio"
                        xtype="selection">
                    <options jcr:primaryType="cq:WidgetCollection">
                        <false
                                text="No"
                                jcr:primaryType="nt:unstructured"
                                value="false"/>
                        <true
                                text="Yes"
                                jcr:primaryType="nt:unstructured"
                                value="true"/>
                    </options>
                    <listeners
                            jcr:primaryType="nt:unstructured"
                            selectionchanged="function(box,value){var textfields = box.ownerCt.findByType('textfield'); if(textfields[0].name=='./rotationSpeed'){ if(value == 'true'){ textfields[0].show();} else { textfields[0].hide(); }}}"/>
                </autoRotation>
                <showWelcomeWidget
                        jcr:primaryType="cq:Widget"
                        defaultValue="true"
                        fieldLabel="Show Welcome Widget"
                        name="./showWelcomeWidget"
                        type="radio"
                        xtype="selection">
                    <options jcr:primaryType="cq:WidgetCollection">
                        <false
                                text="No"
                                jcr:primaryType="nt:unstructured"
                                value="false"/>
                        <true
                                text="Yes"
                                jcr:primaryType="nt:unstructured"
                                value="true"/>
                    </options>
                </showWelcomeWidget>
                <rotationSpeed
                        jcr:primaryType="cq:Widget"
                        fieldLabel="Rotation speed (sec)"
                        name="./rotationSpeed"
                        regex="/^[0-9]{1,4}$/"
                        regexText="Please enter a number from 1 to 9999"
                        xtype="textfield"/>
                <slides
                        jcr:primaryType="cq:Widget"
                        fieldLabel="Slides"
                        name="./slides"
                        xtype="multifield">
                    <fieldConfig
                            jcr:primaryType="cq:Widget"
                            xtype="multifieldpanel">
                        <items jcr:primaryType="cq:WidgetCollection">
                            <championshipPath
                                    jcr:primaryType="cq:Widget"
                                    fieldLabel="Championship Path"
                                    rootPath="/content/admin/schedule"
                                    key="championshipPath"
                                    xtype="pathfield"/>
                            <slideType
                                    jcr:primaryType="cq:Widget"
                                    allowBlank="{Boolean} false"
                                    fieldLabel="Slide Type"
                                    defaultValue="image"
                                    boxMaxWidth="{Long}200"
                                    key="slideType"
                                    type="select"
                                    width="300"
                                    xtype="selection">
                                <options jcr:primaryType="cq:WidgetCollection">
                                    <video
                                            jcr:primaryType="nt:unstructured"
                                            text="Video"
                                            value="video"/>
                                    <image
                                            jcr:primaryType="nt:unstructured"
                                            text="Image"
                                            value="image"/>
                                </options>
                                <listeners
                                        jcr:primaryType="nt:unstructured"
                                        selectionchanged="function(box,value){var buttonsCount,sponsorIcon,sponsorTitle; box.ownerCt.findByType('selection').forEach(function(entry) { if (entry.key=='buttonCount') {buttonsCount = entry;} }); var primaryButtons = []; var secondaryButtons = []; box.ownerCt.findByType('textfield').forEach(function(entry) { if (entry.key=='buttonLabel') {primaryButtons.push(entry);} else if (entry.key=='secondButtonLabel') { secondaryButtons.push(entry); } if (entry.key=='sponsorTitle') {sponsorTitle = entry;} }); box.ownerCt.findByType('pathfield').forEach(function(entry) { if (entry.key=='buttonDestination') {primaryButtons.push(entry);} else if (entry.key=='secondButtonDestination') { secondaryButtons.push(entry); } if (entry.key=='sponsorIcon') {sponsorIcon = entry;} }); if(value == 'video'){ buttonsCount.hide(); sponsorIcon.hide(); sponsorTitle.hide(); primaryButtons.forEach(function(entry) { entry.hide(); }); secondaryButtons.forEach(function(entry) { entry.hide(); });} else { buttonsCount.show(); sponsorIcon.show(); sponsorTitle.show();  primaryButtons.forEach(function(entry) { entry.show(); }); if (buttonsCount.getValue() == 'two') { secondaryButtons.forEach(function(entry) { entry.show(); }); } }}"
                                        loadcontent="function(box,value){var buttonsCount,sponsorIcon,sponsorTitle; box.ownerCt.findByType('selection').forEach(function(entry) { if (entry.key=='buttonCount') {buttonsCount = entry;} }); var primaryButtons = []; var secondaryButtons = []; box.ownerCt.findByType('textfield').forEach(function(entry) { if (entry.key=='buttonLabel') {primaryButtons.push(entry);} else if (entry.key=='secondButtonLabel') { secondaryButtons.push(entry); } if (entry.key=='sponsorTitle') {sponsorTitle = entry;} }); box.ownerCt.findByType('pathfield').forEach(function(entry) { if (entry.key=='buttonDestination') {primaryButtons.push(entry);} else if (entry.key=='secondButtonDestination') { secondaryButtons.push(entry); } if (entry.key=='sponsorIcon') {sponsorIcon = entry;} }); if(value.data.slideType == 'video'){ buttonsCount.hide(); sponsorIcon.hide(); sponsorTitle.hide(); primaryButtons.forEach(function(entry) { entry.hide(); }); secondaryButtons.forEach(function(entry) { entry.hide(); });} else { buttonsCount.show(); sponsorIcon.show(); sponsorTitle.show(); primaryButtons.forEach(function(entry) { entry.show(); }); if (buttonsCount.getValue() == 'two') { secondaryButtons.forEach(function(entry) { entry.show(); }); } }}"/>
                            </slideType>
                            <sponsorTitle
                                    jcr:primaryType="cq:Widget"
                                    fieldLabel="Sponsor Title"
                                    key="sponsorTitle"
                                    width="300"
                                    xtype="textfield"/>
                            <sponsorIcon
                                    jcr:primaryType="cq:Widget"
                                    fieldLabel="Sponsor Icon: "
                                    rootPath="/content/dam/usga"
                                    predicate="nosystem"
                                    key="sponsorIcon"
                                    width="300"
                                    xtype="pathfield">
                                <treeRoot
                                        jcr:primaryType="nt:unstructured"
                                        name="content/dam/usga"
                                        text="Media Assets"/>
                            </sponsorIcon>
                            <slideDestination
                                    jcr:primaryType="cq:Widget"
                                    fieldLabel="Linked page"
                                    key="slideDestination"
                                    width="300"
                                    xtype="pathfield"/>
                            <newWindow
                                    jcr:primaryType="cq:Widget"
                                    fieldLabel="Open linked page in a new window"
                                    defaultValue="no"
                                    boxMaxWidth="{Long}200"
                                    key="newWindow"
                                    type="select"
                                    width="300"
                                    xtype="selection">
                                <options jcr:primaryType="cq:WidgetCollection">
                                    <yes
                                            jcr:primaryType="nt:unstructured"
                                            text="Yes"
                                            value="_blank"/>
                                    <no
                                            jcr:primaryType="nt:unstructured"
                                            text="No"
                                            value="_self"/>
                                </options>
                            </newWindow>
                            <title
                                    jcr:primaryType="cq:Widget"
                                    fieldLabel="Title Linked Page"
                                    key="title"
                                    width="300"
                                    xtype="textfield"/>
                            <category
                                    jcr:primaryType="cq:Widget"
                                    fieldLabel="Category"
                                    key="category"
                                    width="300"
                                    xtype="textfield"/>
                            <slideDescription
                                    jcr:primaryType="cq:Widget"
                                    fieldLabel="Description"
                                    key="slideDescription"
                                    width="300"
                                    xtype="textarea"/>
                            <buttonCount
                                    jcr:primaryType="cq:Widget"
                                    fieldLabel="Buttons count"
                                    defaultValue="one"
                                    boxMaxWidth="{Long}200"
                                    key="buttonCount"
                                    type="select"
                                    width="300"
                                    xtype="selection">
                                <options jcr:primaryType="cq:WidgetCollection">
                                    <one
                                            jcr:primaryType="nt:unstructured"
                                            text="1"
                                            value="one"/>
                                    <two
                                            jcr:primaryType="nt:unstructured"
                                            text="2"
                                            value="two"/>
                                </options>
                                <listeners
                                        jcr:primaryType="nt:unstructured"
                                        selectionchanged="function(box,value){var textfield; box.ownerCt.findByType('textfield').forEach(function(entry) { if (entry.key=='secondButtonLabel') {textfield = entry;} }); var pathfield; box.ownerCt.findByType('pathfield').forEach(function(entry) { if (entry.key=='secondButtonDestination') {pathfield = entry;} }); if(textfield &amp;&amp; pathfield) { if(value == 'two'){ textfield.show(); pathfield.show();} else { textfield.hide(); pathfield.hide(); }}}"
                                        loadcontent="function(box,value){var textfield; box.ownerCt.findByType('textfield').forEach(function(entry) { if (entry.key=='secondButtonLabel') {textfield = entry;} }); var pathfield; box.ownerCt.findByType('pathfield').forEach(function(entry) { if (entry.key=='secondButtonDestination') {pathfield = entry;} }); if(textfield &amp;&amp; pathfield) { if(value.data.buttonCount == 'two'){ textfield.show(); pathfield.show();} else { textfield.hide(); pathfield.hide(); }}}"/>
                            </buttonCount>
                            <buttonLabel
                                    jcr:primaryType="cq:Widget"
                                    fieldLabel="Button Label"
                                    key="buttonLabel"
                                    width="300"
                                    xtype="textfield"/>
                            <buttonDestination
                                    jcr:primaryType="cq:Widget"
                                    fieldLabel="Button Destination"
                                    key="buttonDestination"
                                    width="300"
                                    xtype="pathfield"/>
                            <secondButtonLabel
                                    jcr:primaryType="cq:Widget"
                                    fieldLabel="Second Button Label"
                                    key="secondButtonLabel"
                                    width="300"
                                    xtype="textfield"/>
                            <secondButtonDestination
                                    jcr:primaryType="cq:Widget"
                                    fieldLabel="Second Button Destination"
                                    key="secondButtonDestination"
                                    width="300"
                                    xtype="pathfield"/>
                            <background
                                    jcr:primaryType="cq:Widget"
                                    fieldLabel="Background Image"
                                    key="background"
                                    predicate="nosystem"
                                    rootPath="/content/dam/usga"
                                    width="300"
                                    xtype="pathfield">
                                <treeRoot
                                        jcr:primaryType="nt:unstructured"
                                        name="content/dam/usga"
                                        text="Media Assets"/>
                            </background>
                            <navTitle
                                    jcr:primaryType="cq:Widget"
                                    fieldLabel="Title of slide in navigation bar"
                                    key="navTitle"
                                    width="300"
                                    xtype="textfield"/>
                        </items>
                    </fieldConfig>
                </slides>
            </items>
        </tab>
    </items>
</jcr:root>